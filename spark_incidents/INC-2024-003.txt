Incident ID: INC-2024-003
Date: 2024-02-01
Cluster: Spark-Cluster-A
Application: ETL Job
Error Summary: ETL stuck since last night. morning batch not completed. business impact high
Root Cause: See work notes for details
Resolution:
  - Tom 11:00am - implemented salting on join key
  - Lesson: enable aqe by default!
  - Salting on join key
Key Learnings: Enable aqe by default!
Work Notes:
job stuck at stage 4/7 for 6 hours
checking shuffle metrics, 2 tasks taking forever
classic skew problem, salting should fix
implemented salting on join key
also enabled AQE spark.sql.adaptive.enabled=true
job completed in 45 mins after fix
lesson: enable AQE by default!
